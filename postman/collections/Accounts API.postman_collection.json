{
  "info": {
    "_postman_id": "accounts-api-collection",
    "name": "Accounts API",
    "description": "API for managing user accounts, balances, and onboarding workflows",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Create Account",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test('Status code is 201', function () {",
              "    pm.response.to.have.status(201);",
              "});",
              "",
              "pm.test('Response has account object', function () {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData).to.have.property('account');",
              "});",
              "",
              "pm.test('Account has required fields', function () {",
              "    const account = pm.response.json().account;",
              "    pm.expect(account).to.have.property('id');",
              "    pm.expect(account).to.have.property('userId');",
              "    pm.expect(account).to.have.property('type');",
              "    pm.expect(account).to.have.property('createdAt');",
              "});",
              "",
              "pm.test('Store accountId for later use', function () {",
              "    const account = pm.response.json().account;",
              "    pm.collectionVariables.set('accountId', account.id);",
              "});"
            ]
          }
        }
      ],
      "id": "b845750c-d104-49d3-b872-5bd3db53fd3c",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n\t\"userId\": \"u1\",\n\t\"type\": \"standard\"\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "{{baseUrl}}/accounts",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "accounts"
          ]
        },
        "description": "Creates an account for an existing user"
      },
      "response": []
    },
    {
      "name": "Get Account",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test('Status code is 200', function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('Response has account object and balance', function () {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData).to.have.property('account');",
              "    pm.expect(jsonData).to.have.property('balance');",
              "});",
              "",
              "pm.test('Account has required fields', function () {",
              "    const account = pm.response.json().account;",
              "    pm.expect(account).to.have.property('id');",
              "    pm.expect(account).to.have.property('userId');",
              "    pm.expect(account).to.have.property('type');",
              "    pm.expect(account).to.have.property('createdAt');",
              "});",
              "",
              "pm.test('Balance is a number', function () {",
              "    const balance = pm.response.json().balance;",
              "    pm.expect(balance).to.be.a('number');",
              "});"
            ]
          }
        }
      ],
      "id": "257a981e-76ef-4e3e-ae46-dc5cf9a6b8c0",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/accounts/:id",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "accounts",
            ":id"
          ],
          "variable": [
            {
              "key": "id",
              "value": "a1",
              "description": "The account ID"
            }
          ]
        },
        "description": "Fetches an account by id along with its balance"
      },
      "response": []
    },
    {
      "name": "List Accounts",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test('Status code is 200', function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('Response has accounts array', function () {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData).to.have.property('accounts');",
              "    pm.expect(jsonData.accounts).to.be.an('array');",
              "});"
            ]
          }
        }
      ],
      "id": "6774f7b7-b7e0-4934-a537-6adf3b8e2b11",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/accounts?userId=user-123",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "accounts"
          ],
          "query": [
            {
              "key": "userId",
              "value": "user-123",
              "description": "The user ID to filter accounts by"
            }
          ]
        },
        "description": "Lists accounts for a user"
      },
      "response": []
    },
    {
      "name": "Credit Account",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test('Status code is 200', function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('Response has accountId and balance', function () {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData).to.have.property('accountId');",
              "    pm.expect(jsonData).to.have.property('balance');",
              "});",
              "",
              "pm.test('Balance is a number', function () {",
              "    const balance = pm.response.json().balance;",
              "    pm.expect(balance).to.be.a('number');",
              "});"
            ]
          }
        }
      ],
      "id": "3b3f500f-4675-4005-994c-86b91109e98f",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n\t\"amount\": 100\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "{{baseUrl}}/accounts/:id/credit",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "accounts",
            ":id",
            "credit"
          ],
          "variable": [
            {
              "key": "id",
              "value": "a1",
              "description": "The account ID"
            }
          ]
        },
        "description": "Applies a credit to an account balance"
      },
      "response": []
    },
    {
      "name": "Onboard User",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test('Status code is 201', function () {",
              "    pm.response.to.have.status(201);",
              "});",
              "",
              "pm.test('Response has user, account, assignment, and balance', function () {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData).to.have.property('user');",
              "    pm.expect(jsonData).to.have.property('account');",
              "    pm.expect(jsonData).to.have.property('assignment');",
              "    pm.expect(jsonData).to.have.property('balance');",
              "});",
              "",
              "pm.test('User has required fields', function () {",
              "    const user = pm.response.json().user;",
              "    pm.expect(user).to.have.property('id');",
              "    pm.expect(user).to.have.property('name');",
              "    pm.expect(user).to.have.property('email');",
              "});",
              "",
              "pm.test('Account has required fields', function () {",
              "    const account = pm.response.json().account;",
              "    pm.expect(account).to.have.property('id');",
              "    pm.expect(account).to.have.property('userId');",
              "    pm.expect(account).to.have.property('type');",
              "    pm.expect(account).to.have.property('createdAt');",
              "});"
            ]
          }
        }
      ],
      "id": "4c23a9ff-9539-46e6-91c4-7aa835c1ddb5",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n\t\"name\": \"John Doe\",\n\t\"email\": \"john@example.com\",\n\t\"productId\": \"product-123\",\n\t\"initialCredit\": 50\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "{{baseUrl}}/accounts/onboard",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "accounts",
            "onboard"
          ]
        },
        "description": "Creates a user, creates an account, optionally credits it, and assigns a product via the catalog service"
      },
      "response": []
    },
    {
      "name": "Health Check",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test('Status code is 200', function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('Response has status ok', function () {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData.status).to.equal('ok');",
              "});",
              "",
              "pm.test('Service is accounts-api', function () {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData.service).to.equal('accounts-api');",
              "});"
            ]
          }
        }
      ],
      "id": "78dd1152-5931-4946-a629-f6f62e15e02a",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/health",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "health"
          ]
        },
        "description": "Basic service health check"
      },
      "response": []
    }
  ]
}